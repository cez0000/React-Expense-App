{"ast":null,"code":"import CartContext from\"./cart-context\";import{useReducer}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const defaultCartState={items:[],totalAmount:0};const cartReducer=(state,action)=>{if(action.type==='ADD'){const updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;const existingCartItemIndex=state.items.findIndex(item=>item.id===action.item.id);console.log(existingCartItemIndex);const existingCartItem=state.items[existingCartItemIndex];let updatedItems;if(existingCartItem){const updatedItem={...existingCartItem,amount:existingCartItem.amount+action.item.amount};updatedItems=[...state.items];updatedItems[existingCartItemIndex]=updatedItem;}else{updatedItems=state.items.concat(action.item);}return{items:updatedItems,totalAmount:updatedTotalAmount};}if(action.type==='REMOVE'){const existingCartItemIndex=state.items.findIndex(item=>item.id===action.id);const existingItem=state.items[existingCartItemIndex];const updatedTotalamount=state.totalAmount-existingItem.price;let updatedItems;if(existingItem.amount===1){updatedItems=state.items.filter(item=>item.id!==action.id);}else{const updatedItem={...existingItem,amount:existingItem.amount-1};updatedItems=[...state.items];updatedItems[existingCartItemIndex]=updatedItem;return{items:updatedItems,totalAmount:updatedTotalamount};}}return defaultCartState;};const CartProvider=props=>{const[cartState,dispatchCartAction]=useReducer(cartReducer,defaultCartState);const addItem=item=>{dispatchCartAction({type:'ADD',item:item});};const removeItem=id=>{dispatchCartAction({type:'REMOVE',id:id});};const cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItem,removeItem:removeItem};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartProvider;","map":{"version":3,"names":["CartContext","useReducer","jsx","_jsx","defaultCartState","items","totalAmount","cartReducer","state","action","type","updatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","console","log","existingCartItem","updatedItems","updatedItem","concat","existingItem","updatedTotalamount","filter","CartProvider","props","cartState","dispatchCartAction","addItem","removeItem","cartContext","Provider","value","children"],"sources":["C:/Users/c.kwiatek/Desktop/React-Expense-App/src/store/CartProvider.jsx"],"sourcesContent":["import CartContext from \"./cart-context\";\r\nimport { useReducer } from \"react\";\r\n\r\nconst defaultCartState = {\r\n    items: [],\r\n    totalAmount: 0\r\n};\r\n\r\nconst cartReducer = (state, action) => {\r\n    if (action.type === 'ADD') {\r\n        const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\r\n    \r\n\r\n        const existingCartItemIndex = state.items.findIndex((item) => item.id === action.item.id);\r\n        console.log(existingCartItemIndex);\r\n        const existingCartItem = state.items[existingCartItemIndex];\r\n        let updatedItems;\r\n        if (existingCartItem) {\r\n            const updatedItem = {\r\n                ...existingCartItem,\r\n                amount: existingCartItem.amount + action.item.amount\r\n            };\r\n            updatedItems = [...state.items]\r\n            updatedItems[existingCartItemIndex] = updatedItem;\r\n        } else {\r\n            updatedItems = state.items.concat(action.item);\r\n\r\n        }\r\n        return {\r\n            items: updatedItems,\r\n            totalAmount: updatedTotalAmount\r\n        }\r\n    }\r\n    if (action.type === 'REMOVE') {\r\n        const existingCartItemIndex = state.items.findIndex((item) => item.id === action.id);\r\n        const existingItem = state.items[existingCartItemIndex];\r\n        const updatedTotalamount = state.totalAmount - existingItem.price;\r\n        let updatedItems;\r\n        if (existingItem.amount === 1) {\r\n            updatedItems = state.items.filter(item => item.id !== action.id)\r\n        } else {\r\n            const updatedItem = { ...existingItem, amount: existingItem.amount - 1 };\r\n            updatedItems = [...state.items];\r\n            updatedItems[existingCartItemIndex] = updatedItem;\r\n\r\n            return {\r\n                items: updatedItems,\r\n                totalAmount: updatedTotalamount\r\n            }\r\n        }\r\n\r\n    }\r\n    return defaultCartState\r\n}\r\n\r\nconst CartProvider = props => {\r\n    const [cartState, dispatchCartAction] = useReducer(cartReducer, defaultCartState)\r\n\r\n    const addItem = item => {\r\n        dispatchCartAction({ type: 'ADD', item: item })\r\n    };\r\n    const removeItem = id => {\r\n        dispatchCartAction({ type: 'REMOVE', id: id })\r\n    }\r\n    const cartContext = {\r\n        items: cartState.items,\r\n        totalAmount: cartState.totalAmount,\r\n        addItem: addItem,\r\n        removeItem: removeItem\r\n    }\r\n    return (\r\n        <CartContext.Provider value={cartContext}>\r\n            {props.children}\r\n        </CartContext.Provider>\r\n    )\r\n};\r\n\r\nexport default CartProvider"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}